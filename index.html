<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Gedempte trilling</title>

  <!-- MathJax for pretty formulas -->
  <script>
    window.MathJax = {
      tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
      svg: {fontCache: 'global'}
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    body { font-family: sans-serif; }
    #formula { margin: 1em 0; font-size: 1.2em; }
  </style>
</head>
<body>

  <!-- Controls (example; hook these up to your existing sliders) -->
  <label>Ï‰:
    <input type="number" id="omega" value="2" step="0.1" onchange="updateFromInputs()">
  </label>
  <label>demping d:
    <input type="number" id="demping" value="0.2" step="0.05" onchange="updateFromInputs()">
  </label>
  <label>A:
    <input type="number" id="A" value="1" step="0.1" onchange="updateFromInputs()">
  </label>
  <label>B:
    <input type="number" id="B" value="0" step="0.1" onchange="updateFromInputs()">
  </label>
  <label>C:
    <input type="number" id="C" value="0" step="0.1" onchange="updateFromInputs()">
  </label>
  <label>Schrijfwijze:
    <select id="vorm" onchange="updateFromInputs()">
      <option value="Trig">Trig</option>
      <option value="Complex">Complex</option>
    </select>
  </label>

  <!-- This is the analogue of TraditionalForm[x[t]] in Mathematica -->
  <div id="formula"></div>

  <!-- Your plot container would be here -->
  <canvas id="plot" width="600" height="400"></canvas>

  <script>
    function updateFromInputs() {
      const omega  = parseFloat(document.getElementById('omega').value);
      const d      = parseFloat(document.getElementById('demping').value);
      const A      = parseFloat(document.getElementById('A').value);
      const B      = parseFloat(document.getElementById('B').value);
      const C      = parseFloat(document.getElementById('C').value);
      const vorm   = document.getElementById('vorm').value;

      updateFormula(omega, d, A, B, C, vorm);
      // call your plot-update function here as well
    }

    function num(x) {
      return x.toFixed(2);   // nice short numbers in the formula
    }

    function updateFormula(omega, d, A, B, C, vorm) {
      const od = omega * Math.sqrt(Math.max(0, 1 - d * d)); // gedempte hoeksnelheid
      let tex = '';

      if (d === 0 && vorm === 'Trig') {
        // Ongedempt
        tex = `x(t) = ${num(A)}\\cos(\\omega t) + ${num(B)}\\sin(\\omega t) + ${num(C)}`;
      } else if (0 < d && d < 1 && vorm === 'Trig') {
        // Onder gedempt, trig-vorm
        tex = `x(t) = e^{-${num(d)} t}\\big(${num(A)}\\cos(\\omega_d t) + ${num(B)}\\sin(\\omega_d t)\\big) + ${num(C)},`
            + `\\quad \\omega_d = \\omega\\sqrt{1-d^{2}}`;
      } else if (0 < d && d < 1 && vorm === 'Complex') {
        // Onder gedempt, complexe schrijfwijze
        tex = `x(t) = e^{-${num(d)} t}\\big(${num(A)}e^{i\\omega_d t} + ${num(B)}e^{-i\\omega_d t}\\big) + ${num(C)},`
            + `\\quad \\omega_d = \\omega\\sqrt{1-d^{2}}`;
      } else if (d === 1) {
        // Kritisch gedempt
        tex = `x(t) = e^{-t}\\big(${num(A)} + ${num(B)} t\\big) + ${num(C)}`;
      } else if (d > 1) {
        // Overgedempt
        const r1 = -(d - Math.sqrt(d*d - 1));
        const r2 = -(d + Math.sqrt(d*d - 1));
        tex = `x(t) = ${num(A)}e^{${num(r1)} t} + ${num(B)}e^{${num(r2)} t} + ${num(C)},`
            + `\\quad r_{1,2} = -\\big(d \\mp \\sqrt{d^{2}-1}\\big)`;
      } else {
        tex = 'x(t) = \\text{(onbekend regime)}';
      }

      const formulaDiv = document.getElementById('formula');
      formulaDiv.innerHTML = `Formule voor de beweging:<br>$$${tex}$$`;
      if (window.MathJax && window.MathJax.typesetPromise) {
        MathJax.typesetPromise([formulaDiv]);
      }
    }

    // initial render
    updateFromInputs();
  </script>
</body>
</html>
